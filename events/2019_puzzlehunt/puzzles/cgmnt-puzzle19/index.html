
<!DOCTYPE html>
<html><head>
    
    
    <title> CIGMAH - HPV Profiling </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="2019 Puzzle Hunt - Puzzle 19C">
    <meta name="theme-color" content="#000000" />
    <link rel="icon" href="https://cigmah.org/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cigmah.org/js/toggles.js"></script>
    <link type="text/css" rel="stylesheet" href=https://cigmah.org/sass/main.css>
    <link rel="canonical" href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle19/">
</head>
<body>
        <header>

            <nav id="nav-menu-toggle" onClick="toggleNav()">
                <div id="menu-text">â˜°</div>
                <div id="cigmah-brand">
                    <div id="cigmah-icon">
                        <img src="https://cigmah.org/img/cigmah-icon.png">
                    </div>
                    <div id="cigmah-text">
                        CIGMAH
                    </div>
                </div>
            </nav>

            <nav id="nav-bar">

<ul id="nav-link-list" onClick="()">

    <li
        class="nav-link-list-item "
    >
        <a
            class="nav-link-list-link "
            id="nav-cigmah-link"
            href=https://cigmah.org/
        >
            <img id="nav-cigmah-link-icon" src="/img/cigmah-icon-small.png">
            <div>CIGMAH</div>
        </a>
    </li>

  
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/about/
        >
            About
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/events/
        >
            Events
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/tools/
        >
            Tools
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/resources/
        >
            Resources
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/blog/
        >
            Blog
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/contact/
        >
            Contact
        </a>
    </li>
    

    <li
        class="nav-link-list-item"
        id="nav-right-item"
        >
        <a
            href="https://aorta.cigmah.org"
            id="nav-aorta-link"
            class="nav-link-list-link"
        >
            <img id="nav-aorta-link-icon" src="/img/aorta-icon.png">
            <div id="nav-aorta-link">AORTA</div>
        </a>
    </li>
</ul>
</nav>

        </header>

        <main>



<section class="normal-page">
    <article id="side-navigation">
        <article id="toggle-side-navigation-container">

            
            <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle18/" id="back"> &lt;&lt; </a>
            

            <button id="toggle-side-navigation" onClick="toggleSideNav()">Show Articles</button>

            
            <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle20/" id="next"> &gt;&gt; </a>
            

        </article>

        <ul id="side-navigation-list">

            
            <li class="side-navigation-parent">
                <a href="https://cigmah.org/events/">Events</a>
            </li>
            


            <li class="side-navigation-section">
                <a href="https://cigmah.org/events/2019_puzzlehunt/">
                    2019 Puzzle Hunt
                </a>
            </li>

            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle01/">Lost in a Library</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle02/">Metabolic Mayhem</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle03/">Combo Catcher</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle04/">Troubled Test</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle05/">Out of Sync</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle06/">While You&#39;re Waiting</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle07/">Infectious Network</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle08/">Tarsal Tumble</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle09/">Fundal Flow</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle10/">Bite Cell Scouting</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle11/">NeuroLogic</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle12/">Reschedule All</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle13/">Allele Inference</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle14/">Base in Balance</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle15/">Worst Offender</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle16/">STI Bugs&#39;n&#39;Drugs</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle17/">What Dipstick?</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle18/">Peak Flow Diary</a>
            </li>
            
            <li
                class="side-navigation-item  active "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle19/">HPV Profiling</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle20/">Code Broadcast</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle21/">Genetic Thrift</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle22/">Neural Decoding</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle23/">Run! (Preclinical)</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle24/">Run! (Clinical)</a>
            </li>
            

        </ul>

    </article>

    <section id="container">

        <article id="content">
            <header id="content-header">
            <h1 id="content-title"> HPV Profiling </h1>

            
                <div id="subtitle">
                    <div> 2019 Puzzle Hunt - Puzzle 19C </div>
                </div>
            

            </div>

            </header>

            <section id="content-body">
                <blockquote>
<p>This puzzle was released on 2019-07-13, and was the Challenge puzzle for the theme <em>Small Code</em>.</p>
</blockquote>
<p>If only you could get some sleep. But still, you press on.</p>
<p>It&rsquo;s 5:40am. Facing North, you walk through the corridor on the 3rd wall.</p>
<p><img src="https://i.imgur.com/qMBzfie.gif" alt="Imgur"></p>
<p>You turn on the computer in the middle of the room. A message comes up.</p>
<hr>
<p>Good morning keen student doctor,</p>
<p>I have a great summer vacation project for you! I&rsquo;ve got some data on <a href="http://www.cancerscreening.gov.au/internet/screening/publishing.nsf/Content/guide-to-understanding-your-cervical-screening-test-results">HPV screening test results</a> that look like this:</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Patient ID: 0001
Location: Azure Meadows

    HPV 16:             Not detected
    HPV 18:             Not detected
    HPV (not 16/18):    Not detected

    Liquid based cytology (LBC): Not performed.

RECOMMENDATION: Rescreen in 5 years.
</code></pre></div><p>I&rsquo;ve got 2500 patients with data that looks like the above, each with their location (and there are 20 locations in total). Every patient in the dataset had a good sample - no &ldquo;unsatisfactory samples&rdquo; in <em>my</em> dataset!</p>
<p>I&rsquo;m investigating the prevalence of HPV types in different locations. What I want to do is profile each location by the <strong>ratio of detected HPV16 to detected HPV18</strong> in this dataset. Ultimately, I want to find the <strong>location with the highest HPV16 to HPV18 ratio</strong>.</p>
<p>You can assume all three results (i.e. HPV16, HPV18 and HPV-not-16/18) are independent. I imagine you&rsquo;ll have to tally up every time HPV16 is detected for a patient in a particular location, and tally up every time HPV18 is detected for a patient in a particular location, then divide the two numbers for each location and compare them. If both are detected in a single sample, still record them in both your tallies. I can confirm that each location has at least one detection each of HPV16 and HPV18 amongst its patients.</p>
<p>There&rsquo;s a lot of data to go through, so it&rsquo;ll be about 2 weeks full-time. Hope you can help us!</p>
<p>Dr Bertha Sweet</p>
<p>Obstetrician &amp; Gynaecologist</p>
<hr>
<p>You briefly reflect on whether a person&rsquo;s name might affect their occupational choice later in life.</p>
<h1 id="input">Input</h1>
<p>Your puzzle input is <a href="https://drive.google.com/open?id=1gqaQBmhHDYisF-u1IXvJCXKLsh5uXTMM"><code>cgmnt_input19.txt</code> (840.7kB, .txt)</a>.</p>
<h1 id="statement">Statement</h1>
<p>Submit the name of the location which has the highest ratio of HPV16 to HPV18 detections.</p>
<h1 id="references">References</h1>
<p>Written by the CIGMAH Puzzle Hunt Team.</p>
<p>The data for this puzzle is generated data. The code to generate the data is available after the puzzle is solved. The result template is based on <a href="https://wiki.cancer.org.au/australia/Guidelines:Cervical_cancer/Screening/Sample_cervical_screening_reports">sample results from the Cancer Council website</a>.</p>
<hr>
<h1 id="answer">Answer</h1>
<p>The correct solution was <code>Honeydew Mountains</code>.</p>
<h1 id="explanation">Explanation</h1>
<p>Here&rsquo;s an example solution using the Python standard library. It&rsquo;s not very short, and we are sure you could write this shorter. We would love to see other solutions in the comments.</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">re</span>
<span style="color:#008000;font-weight:bold">from</span> <span style="color:#00f;font-weight:bold">collections</span> <span style="color:#008000;font-weight:bold">import</span> Counter

<span style="color:#008000;font-weight:bold">with</span> <span style="color:#008000">open</span>(<span style="color:#ba2121">&#34;cgmnt_input19.txt&#34;</span>) <span style="color:#008000;font-weight:bold">as</span> infile:
  query <span style="color:#666">=</span> re<span style="color:#666">.</span>compile(<span style="color:#ba2121">r</span><span style="color:#ba2121">&#34;Location: ([\w ]+)\n* +HPV 16: +([\w ]+)\n +HPV 18: +([\w ]+)&#34;</span>)
  results <span style="color:#666">=</span> query<span style="color:#666">.</span>findall(infile<span style="color:#666">.</span>read())
  hpv_16s <span style="color:#666">=</span> Counter([result[<span style="color:#666">0</span>] <span style="color:#008000;font-weight:bold">for</span> result <span style="color:#a2f;font-weight:bold">in</span> results <span style="color:#008000;font-weight:bold">if</span> result[<span style="color:#666">1</span>] <span style="color:#666">==</span> <span style="color:#ba2121">&#39;DETECTED&#39;</span>])
  hpv_18s <span style="color:#666">=</span> Counter([result[<span style="color:#666">0</span>] <span style="color:#008000;font-weight:bold">for</span> result <span style="color:#a2f;font-weight:bold">in</span> results <span style="color:#008000;font-weight:bold">if</span> result[<span style="color:#666">2</span>] <span style="color:#666">==</span> <span style="color:#ba2121">&#39;DETECTED&#39;</span>])
  ratios <span style="color:#666">=</span> {k: hpv_16s[k] <span style="color:#666">/</span> hpv_18s[k] <span style="color:#008000;font-weight:bold">for</span> k <span style="color:#a2f;font-weight:bold">in</span> hpv_16s<span style="color:#666">.</span>keys()}
  <span style="color:#008000;font-weight:bold">print</span>([r <span style="color:#008000;font-weight:bold">for</span> r <span style="color:#a2f;font-weight:bold">in</span> ratios<span style="color:#666">.</span>keys() <span style="color:#008000;font-weight:bold">if</span> ratios[r] <span style="color:#666">&gt;=</span> <span style="color:#008000">max</span>(ratios<span style="color:#666">.</span>values())])
</code></pre></div><pre><code>['Honeydew Mountains']
</code></pre><p>And here&rsquo;s all the ratios:</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Coral Beach: <span style="color:#666">0.84</span>
Maroon Island: <span style="color:#666">1.2142857142857142</span>
Violet Acre: <span style="color:#666">2.8666666666666667</span>
Snow Hills: <span style="color:#666">0.7441860465116279</span>
Beige Town: <span style="color:#666">0.8235294117647058</span>
Yellow Green Hinterlands: <span style="color:#666">1.0</span>
Honeydew Mountains: <span style="color:#666">3.0625</span>
Wheat Farm: <span style="color:#666">0.29545454545454547</span>
Lime City: <span style="color:#666">2.05</span>
Rosy Brown Street: <span style="color:#666">2.5238095238095237</span>
Orchid Forest: <span style="color:#666">1.0434782608695652</span>
Dodger Blue Trench: <span style="color:#666">1.1714285714285715</span>
Khaki Lane: <span style="color:#666">2.25</span>
Ivory Fields: <span style="color:#666">1.0666666666666667</span>
Teal Woods: <span style="color:#666">0.8571428571428571</span>
Fuchsia Greens: <span style="color:#666">0.7586206896551724</span>
Navy Reef: <span style="color:#666">0.13043478260869565</span>
Azure Meadows: <span style="color:#666">0.1694915254237288</span>
Peru: <span style="color:#666">0.10416666666666667</span>
Gainsboro Plains: <span style="color:#666">0.42105263157894735</span>
</code></pre></div><p>The solution is fairly straightforward once you make a regular expression to parse the text results. This is probably one of the easier Challenge puzzles we&rsquo;ve released so far and was not originally the puzzle we were going to release this month for the Challenge, but we did not have enough time to polish the other puzzle.</p>
<p>Here&rsquo;s the generation code for this dataset. Neither clear nor concise, but it did its job.</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">random</span>
<span style="color:#008000;font-weight:bold">from</span> <span style="color:#00f;font-weight:bold">typing</span> <span style="color:#008000;font-weight:bold">import</span> List

<span style="color:#408080;font-style:italic">### DEFINING CONSTANTS</span>

<span style="color:#408080;font-style:italic">### HPV Results</span>
HPV_16 <span style="color:#666">=</span> <span style="color:#666">0</span>
HPV_18 <span style="color:#666">=</span> <span style="color:#666">1</span>
HPV_OTHER <span style="color:#666">=</span> <span style="color:#666">2</span>
HPV_TYPES <span style="color:#666">=</span> [HPV_16, HPV_18, HPV_OTHER]

<span style="color:#408080;font-style:italic">### LBC Results</span>
LBC_NEGATIVE <span style="color:#666">=</span> <span style="color:#666">0</span>
LBC_LSIL <span style="color:#666">=</span> <span style="color:#666">1</span>
LBC_HSIL <span style="color:#666">=</span> <span style="color:#666">2</span>

LBC_RESULTS <span style="color:#666">=</span> [LBC_NEGATIVE, LBC_LSIL, LBC_HSIL]

LBC_RESULT_STRINGS <span style="color:#666">=</span> {
  LBC_NEGATIVE: <span style="color:#ba2121">&#34;No intrapethelial lesions identified.&#34;</span>,
  LBC_LSIL: <span style="color:#ba2121">&#34;Low-grade squamous intraepithelial lesion (LSIL).&#34;</span>,
  LBC_HSIL: <span style="color:#ba2121">&#34;High-grade squamous intraepithelial lesion (HSIL).&#34;</span>,
}

RESULT_TEMPLATE <span style="color:#666">=</span> <span style="color:#ba2121">&#34;    Liquid based cytology (LBC): {result}</span><span style="color:#b62;font-weight:bold">\n\n</span><span style="color:#ba2121">RECOMMENDATION: {recommendation}</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#ba2121">&#34;</span>

LOCATIONS <span style="color:#666">=</span> [
  <span style="color:#ba2121">&#34;Azure Meadows&#34;</span>,
  <span style="color:#ba2121">&#34;Beige Town&#34;</span>,
  <span style="color:#ba2121">&#34;Coral Beach&#34;</span>,
  <span style="color:#ba2121">&#34;Dodger Blue Trench&#34;</span>,
  <span style="color:#ba2121">&#34;Fuchsia Greens&#34;</span>,
  <span style="color:#ba2121">&#34;Gainsboro Plains&#34;</span>,
  <span style="color:#ba2121">&#34;Honeydew Mountains&#34;</span>,
  <span style="color:#ba2121">&#34;Ivory Fields&#34;</span>,
  <span style="color:#ba2121">&#34;Khaki Lane&#34;</span>,
  <span style="color:#ba2121">&#34;Lime City&#34;</span>,
  <span style="color:#ba2121">&#34;Maroon Island&#34;</span>,
  <span style="color:#ba2121">&#34;Navy Reef&#34;</span>,
  <span style="color:#ba2121">&#34;Orchid Forest&#34;</span>,
  <span style="color:#ba2121">&#34;Peru&#34;</span>,
  <span style="color:#ba2121">&#34;Rosy Brown Street&#34;</span>,
  <span style="color:#ba2121">&#34;Snow Hills&#34;</span>,
  <span style="color:#ba2121">&#34;Teal Woods&#34;</span>,
  <span style="color:#ba2121">&#34;Violet Acre&#34;</span>,
  <span style="color:#ba2121">&#34;Wheat Farm&#34;</span>,
  <span style="color:#ba2121">&#34;Yellow Green Hinterlands&#34;</span>,
]

<span style="color:#008000;font-weight:bold">def</span> <span style="color:#00f">make_random_ratio</span>() <span style="color:#666">-&gt;</span> List[<span style="color:#008000">float</span>]:
  <span style="color:#408080;font-style:italic"># Corresponds to HPV_16, HPV_18, HPV_OTHER</span>
  raws <span style="color:#666">=</span> [random<span style="color:#666">.</span>random(), random<span style="color:#666">.</span>random(), random<span style="color:#666">.</span>random()]
  summed <span style="color:#666">=</span> <span style="color:#008000">sum</span>(raws)
  <span style="color:#008000;font-weight:bold">return</span> [r <span style="color:#666">/</span> summed <span style="color:#008000;font-weight:bold">for</span> r <span style="color:#a2f;font-weight:bold">in</span> raws]

LOCATION_RATIOS <span style="color:#666">=</span> {location: make_random_ratio() <span style="color:#008000;font-weight:bold">for</span> location <span style="color:#a2f;font-weight:bold">in</span> LOCATIONS}

FULL_TEMPLATE <span style="color:#666">=</span> <span style="color:#ba2121">&#34;&#34;&#34;
</span><span style="color:#ba2121">Patient ID: {id:04d}
</span><span style="color:#ba2121">Location: {location}
</span><span style="color:#ba2121">{result}
</span><span style="color:#ba2121">{recommendation}&#34;&#34;&#34;</span>

<span style="color:#408080;font-style:italic">## CONVENIENCE FUNCTIONS</span>

<span style="color:#008000;font-weight:bold">def</span> <span style="color:#00f">make_recommendation</span>(hpv_types: List[<span style="color:#008000">int</span>]) <span style="color:#666">-&gt;</span> <span style="color:#008000">str</span>:
  <span style="color:#008000;font-weight:bold">if</span> (HPV_16 <span style="color:#a2f;font-weight:bold">in</span> hpv_types) <span style="color:#a2f;font-weight:bold">or</span> (HPV_18 <span style="color:#a2f;font-weight:bold">in</span> hpv_types):
    lbc_result <span style="color:#666">=</span> random<span style="color:#666">.</span>choice(LBC_RESULTS)
    <span style="color:#008000;font-weight:bold">return</span> RESULT_TEMPLATE<span style="color:#666">.</span>format(
      result<span style="color:#666">=</span>LBC_RESULT_STRINGS[lbc_result],
      recommendation<span style="color:#666">=</span><span style="color:#ba2121">&#34;Refer for colposcopy.&#34;</span>
    )
  <span style="color:#008000;font-weight:bold">elif</span> (HPV_OTHER <span style="color:#a2f;font-weight:bold">in</span> hpv_types):
    lbc_result <span style="color:#666">=</span> random<span style="color:#666">.</span>choice(LBC_RESULTS)
    <span style="color:#008000;font-weight:bold">if</span> lbc_result <span style="color:#666">==</span> LBC_HSIL:
      <span style="color:#008000;font-weight:bold">return</span> RESULT_TEMPLATE<span style="color:#666">.</span>format(
        result<span style="color:#666">=</span>LBC_RESULT_STRINGS[lbc_result],
        recommendation<span style="color:#666">=</span><span style="color:#ba2121">&#34;Refer for colposcopy.&#34;</span>
      )
    <span style="color:#008000;font-weight:bold">else</span>:
      <span style="color:#008000;font-weight:bold">return</span> RESULT_TEMPLATE<span style="color:#666">.</span>format(
        result<span style="color:#666">=</span>LBC_RESULT_STRINGS[lbc_result],
        recommendation<span style="color:#666">=</span><span style="color:#ba2121">&#34;Repeat test in 12 months.&#34;</span>
      )
  <span style="color:#008000;font-weight:bold">else</span>:
    <span style="color:#008000;font-weight:bold">return</span> RESULT_TEMPLATE<span style="color:#666">.</span>format(
      result<span style="color:#666">=</span><span style="color:#ba2121">&#34;Not performed.&#34;</span>,
      recommendation<span style="color:#666">=</span><span style="color:#ba2121">&#34;Rescreen in 5 years.&#34;</span>
    )

<span style="color:#008000;font-weight:bold">def</span> <span style="color:#00f">make_result</span>(hpv_types : List[<span style="color:#008000">int</span>]) <span style="color:#666">-&gt;</span> <span style="color:#008000">str</span>:

  <span style="color:#008000;font-weight:bold">def</span> <span style="color:#00f">bool_to_result</span>(val : <span style="color:#008000">bool</span>) <span style="color:#666">-&gt;</span> <span style="color:#008000">str</span>:
    <span style="color:#008000;font-weight:bold">if</span> val:
      <span style="color:#008000;font-weight:bold">return</span> <span style="color:#ba2121">&#34;DETECTED&#34;</span>
    <span style="color:#008000;font-weight:bold">return</span> <span style="color:#ba2121">&#34;Not detected&#34;</span>

  template <span style="color:#666">=</span> <span style="color:#ba2121">&#34;&#34;&#34;
</span><span style="color:#ba2121">    HPV 16:             {hpv_16}
</span><span style="color:#ba2121">    HPV 18:             {hpv_18}
</span><span style="color:#ba2121">    HPV (not 16/18):    {hpv_other}
</span><span style="color:#ba2121">    &#34;&#34;&#34;</span>

  <span style="color:#008000;font-weight:bold">return</span> template<span style="color:#666">.</span>format(
    hpv_16 <span style="color:#666">=</span> bool_to_result(HPV_16 <span style="color:#a2f;font-weight:bold">in</span> hpv_types),
    hpv_18 <span style="color:#666">=</span> bool_to_result(HPV_18 <span style="color:#a2f;font-weight:bold">in</span> hpv_types),
    hpv_other <span style="color:#666">=</span> bool_to_result(HPV_OTHER  <span style="color:#a2f;font-weight:bold">in</span> hpv_types),
  )

<span style="color:#008000;font-weight:bold">def</span> <span style="color:#00f">make_patient</span>(<span style="color:#008000">id</span>: <span style="color:#008000">int</span>) <span style="color:#666">-&gt;</span> <span style="color:#008000">str</span>:
  location <span style="color:#666">=</span> random<span style="color:#666">.</span>choice(LOCATIONS)
  location_ratio <span style="color:#666">=</span> LOCATION_RATIOS[location]

  <span style="color:#408080;font-style:italic"># Global HPV prevalence of 0.40</span>
  <span style="color:#008000;font-weight:bold">if</span> random<span style="color:#666">.</span>random() <span style="color:#666">&lt;</span> <span style="color:#666">0.4</span>:
    <span style="color:#408080;font-style:italic"># With replacement, then convert to set to remove duplicates</span>
    <span style="color:#408080;font-style:italic"># Not exactly going to reflect ratios, but close enough!</span>
    hpvs <span style="color:#666">=</span> <span style="color:#008000">list</span>(<span style="color:#008000">set</span>(random<span style="color:#666">.</span>choices(HPV_TYPES, weights<span style="color:#666">=</span>location_ratio, k<span style="color:#666">=</span><span style="color:#666">3</span>)))
  <span style="color:#008000;font-weight:bold">else</span>:
    hpvs <span style="color:#666">=</span> []

  result <span style="color:#666">=</span> make_result(hpvs)
  recommendation <span style="color:#666">=</span> make_recommendation(hpvs)

  <span style="color:#008000;font-weight:bold">return</span> FULL_TEMPLATE<span style="color:#666">.</span>format(
    <span style="color:#008000">id</span><span style="color:#666">=</span><span style="color:#008000">id</span>,
    location<span style="color:#666">=</span>location,
    result<span style="color:#666">=</span>result,
    recommendation<span style="color:#666">=</span>recommendation,
  )

patients <span style="color:#666">=</span> [make_patient(i) <span style="color:#008000;font-weight:bold">for</span> i <span style="color:#a2f;font-weight:bold">in</span> <span style="color:#008000">range</span>(<span style="color:#666">1</span>, <span style="color:#666">2501</span>)]

<span style="color:#008000;font-weight:bold">with</span> <span style="color:#008000">open</span>(<span style="color:#ba2121">&#34;output.txt&#34;</span>, <span style="color:#ba2121">&#34;w&#34;</span>) <span style="color:#008000;font-weight:bold">as</span> outfile:
  outfile<span style="color:#666">.</span>write((<span style="color:#ba2121">&#34;</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#ba2121">&#34;</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;-&#34;</span> <span style="color:#666">*</span> <span style="color:#666">80</span> <span style="color:#666">+</span> <span style="color:#ba2121">&#34;</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#ba2121">&#34;</span>)<span style="color:#666">.</span>join(patients))

<span style="color:#008000;font-weight:bold">for</span> location <span style="color:#a2f;font-weight:bold">in</span> LOCATIONS:
  location_ratio <span style="color:#666">=</span> LOCATION_RATIOS[location]
  <span style="color:#008000;font-weight:bold">print</span>(f<span style="color:#ba2121">&#34;{location}:</span><span style="color:#b62;font-weight:bold">\t</span><span style="color:#ba2121">{location_ratio[0] / location_ratio[1]:.2f}&#34;</span>)
</code></pre></div>
            </section>

        </article>
    </section>

    
    <footer>Contact us at <code> contact at cigmah dot org </code>.
</footer>
    

</section>


        </main>


    </body>
</html>
