<!DOCTYPE html>
<html><head>
    
    
    <title> CIGMAH - HPV Profiling </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="2019 Puzzle Hunt - Puzzle 19C">
    <meta name="theme-color" content="#000000" />
    <link rel="icon" href="https://cigmah.org/favicon.ico">
    <script src="https://cigmah.org/js/toggles.js"></script>
    <link type="text/css" rel="stylesheet" href=https://cigmah.org/sass/main.css>
    <link rel="canonical" href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle19/puzzle19/">
</head>
<body>
        <header>

            <nav id="nav-menu-toggle" onClick="toggleNav()">
                <div id="menu-text">â˜°</div>
                <div id="cigmah-brand">
                    <div id="cigmah-icon">
                        <img src="https://cigmah.org/img/cigmah-icon.png">
                    </div>
                    <div id="cigmah-text">
                        CIGMAH
                    </div>
                </div>
            </nav>

            <nav id="nav-bar">

<ul id="nav-link-list" onClick="()">

    <li
        class="nav-link-list-item "
    >
        <a
            class="nav-link-list-link "
            id="nav-cigmah-link"
            href=https://cigmah.org/
        >
            <img id="nav-cigmah-link-icon" src="/img/cigmah-icon-small.png">
            <div>CIGMAH</div>
        </a>
    </li>

  
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/about/
        >
            About
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/events/
        >
            Events
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/tools/
        >
            Tools
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/resources/
        >
            Resources
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/blog/
        >
            Blog
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/contact/
        >
            Contact
        </a>
    </li>
    

    <li
        class="nav-link-list-item"
        id="nav-right-item"
        >
        <a
            href="https://aorta.cigmah.org"
            id="nav-aorta-link"
            class="nav-link-list-link"
        >
            <img id="nav-aorta-link-icon" src="/img/aorta-icon.png">
            <div id="nav-aorta-link">AORTA</div>
        </a>
    </li>
</ul>
</nav>

        </header>

        <main>



<section class="normal-page">
    <article id="side-navigation">
        <article id="toggle-side-navigation-container">

            
            <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle18/puzzle18/" id="back"> &lt;&lt; </a>
            

            <button id="toggle-side-navigation" onClick="toggleSideNav()">Show Articles</button>

            
            <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle20/puzzle20/" id="next"> &gt;&gt; </a>
            

        </article>

        <ul id="side-navigation-list">

            
            <li class="side-navigation-parent">
                <a href="https://cigmah.org/events/">Events</a>
            </li>
            


            <li class="side-navigation-section">
                <a href="https://cigmah.org/events/2019_puzzlehunt/">
                    2019 Puzzle Hunt
                </a>
            </li>

            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle01/">Lost in a Library</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle02/">Metabolic Mayhem</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle03/">Combo Catcher</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle04/">Troubled Test</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle05/">Out of Sync</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle06/">While You&#39;re Waiting</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle07/">Infectious Network</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle08/puzzle08/">Tarsal Tumble</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle09/puzzle09/">Fundal Flow</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle10/">Bite Cell Scouting</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle11/puzzle11/">NeuroLogic</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle12/">Reschedule All</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle13/puzzle13/">Allele Inference</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle14/puzzle14/">Base in Balance</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle15/puzzle15/">Worst Offender</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle16/puzzle16/">STI Bugs&#39;n&#39;Drugs</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle17/puzzle17/">What Dipstick?</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle18/puzzle18/">Peak Flow Diary</a>
            </li>
            
            <li
                class="side-navigation-item  active "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle19/puzzle19/">HPV Profiling</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle20/puzzle20/">Code Broadcast</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle21/puzzle21/">Genetic Thrift</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle22/puzzle22/">Neural Decoding</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle23/puzzle23/">Run! (Preclinical)</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle24/puzzle24/">Run! (Clinical)</a>
            </li>
            

        </ul>

    </article>

    <section id="container">

        <article id="content">
            <header id="content-header">
            <h1 id="content-title"> HPV Profiling </h1>

            
                <div id="subtitle">
                    <div> 2019 Puzzle Hunt - Puzzle 19C </div>
                </div>
            

            </div>

            </header>

            <section id="content-body">
                <blockquote>
<p>This puzzle was released on 2019-07-13, and was the Challenge puzzle for the theme <em>Small Code</em>.</p>
</blockquote>
<p>If only you could get some sleep. But still, you press on.</p>
<p>It&rsquo;s 5:40am. Facing North, you walk through the corridor on the 3rd wall.</p>
<p><img src="https://i.imgur.com/qMBzfie.gif" alt="Imgur"></p>
<p>You turn on the computer in the middle of the room. A message comes up.</p>
<hr>
<p>Good morning keen student doctor,</p>
<p>I have a great summer vacation project for you! I&rsquo;ve got some data on <a href="http://www.cancerscreening.gov.au/internet/screening/publishing.nsf/Content/guide-to-understanding-your-cervical-screening-test-results">HPV screening test results</a> that look like this:</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Patient ID: 0001
Location: Azure Meadows

    HPV 16:             Not detected
    HPV 18:             Not detected
    HPV (not 16/18):    Not detected

    Liquid based cytology (LBC): Not performed.

RECOMMENDATION: Rescreen in 5 years.
</code></pre></div><p>I&rsquo;ve got 2500 patients with data that looks like the above, each with their location (and there are 20 locations in total). Every patient in the dataset had a good sample - no &ldquo;unsatisfactory samples&rdquo; in <em>my</em> dataset!</p>
<p>I&rsquo;m investigating the prevalence of HPV types in different locations. What I want to do is profile each location by the <strong>ratio of detected HPV16 to detected HPV18</strong> in this dataset. Ultimately, I want to find the <strong>location with the highest HPV16 to HPV18 ratio</strong>.</p>
<p>You can assume all three results (i.e. HPV16, HPV18 and HPV-not-16/18) are independent. I imagine you&rsquo;ll have to tally up every time HPV16 is detected for a patient in a particular location, and tally up every time HPV18 is detected for a patient in a particular location, then divide the two numbers for each location and compare them. If both are detected in a single sample, still record them in both your tallies. I can confirm that each location has at least one detection each of HPV16 and HPV18 amongst its patients.</p>
<p>There&rsquo;s a lot of data to go through, so it&rsquo;ll be about 2 weeks full-time. Hope you can help us!</p>
<p>Dr Bertha Sweet</p>
<p>Obstetrician &amp; Gynaecologist</p>
<hr>
<p>You briefly reflect on whether a person&rsquo;s name might affect their occupational choice later in life.</p>
<h2 id="input">Input</h2>
<p>Your puzzle input is <a href="https://drive.google.com/open?id=1gqaQBmhHDYisF-u1IXvJCXKLsh5uXTMM"><code>cgmnt_input19.txt</code> (840.7kB, .txt)</a>.</p>
<h2 id="statement">Statement</h2>
<p>Submit the name of the location which has the highest ratio of HPV16 to HPV18 detections.</p>
<h2 id="references">References</h2>
<p>Written by the CIGMAH Puzzle Hunt Team.</p>
<p>The data for this puzzle is generated data. The code to generate the data is available after the puzzle is solved. The result template is based on <a href="https://wiki.cancer.org.au/australia/Guidelines:Cervical_cancer/Screening/Sample_cervical_screening_reports">sample results from the Cancer Council website</a>.</p>
<h2 id="answer">Answer</h2>
<p>The correct solution was <code>Honeydew Mountains</code>.</p>
<h2 id="explanation">Explanation</h2>
<h3 id="convenience-functions">CONVENIENCE FUNCTIONS</h3>
<p>def make_recommendation(hpv_types: List[int]) -&gt; str:
if (HPV_16 in hpv_types) or (HPV_18 in hpv_types):
lbc_result = random.choice(LBC_RESULTS)
return RESULT_TEMPLATE.format(
result=LBC_RESULT_STRINGS[lbc_result],
recommendation=&quot;Refer for colposcopy.&rdquo;
)
elif (HPV_OTHER in hpv_types):
lbc_result = random.choice(LBC_RESULTS)
if lbc_result == LBC_HSIL:
return RESULT_TEMPLATE.format(
result=LBC_RESULT_STRINGS[lbc_result],
recommendation=&quot;Refer for colposcopy.&rdquo;
)
else:
return RESULT_TEMPLATE.format(
result=LBC_RESULT_STRINGS[lbc_result],
recommendation=&quot;Repeat test in 12 months.&rdquo;
)
else:
return RESULT_TEMPLATE.format(
result=&quot;Not performed.&quot;,
recommendation=&quot;Rescreen in 5 years.&rdquo;
)</p>
<p>def make_result(hpv_types : List[int]) -&gt; str:</p>
<p>def bool_to_result(val : bool) -&gt; str:
if val:
return &ldquo;DETECTED&rdquo;
return &ldquo;Not detected&rdquo;</p>
<p>template = &quot;&rdquo;&rdquo;
HPV 16:             {hpv_16}
HPV 18:             {hpv_18}
HPV (not 16/18):    {hpv_other}
&quot;&rdquo;&rdquo;</p>
<p>return template.format(
hpv_16 = bool_to_result(HPV_16 in hpv_types),
hpv_18 = bool_to_result(HPV_18 in hpv_types),
hpv_other = bool_to_result(HPV_OTHER  in hpv_types),
)</p>
<p>def make_patient(id: int) -&gt; str:
location = random.choice(LOCATIONS)
location_ratio = LOCATION_RATIOS[location]</p>
<h1 id="global-hpv-prevalence-of-040">Global HPV prevalence of 0.40</h1>
<p>if random.random() &lt; 0.4:
# With replacement, then convert to set to remove duplicates
# Not exactly going to reflect ratios, but close enough!
hpvs = list(set(random.choices(HPV_TYPES, weights=location_ratio, k=3)))
else:
hpvs = []</p>
<p>result = make_result(hpvs)
recommendation = make_recommendation(hpvs)</p>
<p>return FULL_TEMPLATE.format(
id=id,
location=location,
result=result,
recommendation=recommendation,
)</p>
<p>patients = [make_patient(i) for i in range(1, 2501)]</p>
<p>with open(&ldquo;output.txt&rdquo;, &ldquo;w&rdquo;) as outfile:
outfile.write((&quot;\n&rdquo; + &ldquo;-&rdquo; * 80 + &ldquo;\n&rdquo;).join(patients))</p>
<p>for location in LOCATIONS:
location_ratio = LOCATION_RATIOS[location]
print(f&rdquo;{location}:\t{location_ratio[0] / location_ratio[1]:.2f}&quot;)</p>
<pre><code>
</code></pre>
            </section>

        </article>
    </section>

</section>


        </main>

        <footer><footer>
</footer>
</footer>

    </body>
</html>
