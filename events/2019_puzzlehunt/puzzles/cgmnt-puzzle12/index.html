<!DOCTYPE html>
<html><head>
    
    
    <title> CIGMAH - Reschedule All </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="2019 Puzzle Hunt - Puzzle 12B">
    <meta name="theme-color" content="#000000" />
    <link rel="icon" href="https://cigmah.org/favicon.ico">
    <script src="https://cigmah.org/js/toggles.js"></script>
    <link type="text/css" rel="stylesheet" href=https://cigmah.org/sass/main.css>
    <link rel="canonical" href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle12/">
</head>
<body>
        <header>

            <nav id="nav-menu-toggle" onClick="toggleNav()">
                <div id="menu-text">â˜°</div>
                <div id="cigmah-brand">
                    <div id="cigmah-icon">
                        <img src="https://cigmah.org/img/cigmah-icon.png">
                    </div>
                    <div id="cigmah-text">
                        CIGMAH
                    </div>
                </div>
            </nav>

            <nav id="nav-bar">

<ul id="nav-link-list" onClick="()">

    <li
        class="nav-link-list-item "
    >
        <a
            class="nav-link-list-link "
            id="nav-cigmah-link"
            href=https://cigmah.org/
        >
            <img id="nav-cigmah-link-icon" src="/img/cigmah-icon-small.png">
            <div>CIGMAH</div>
        </a>
    </li>

  
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/about/
        >
            About
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/events/
        >
            Events
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/tools/
        >
            Tools
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/resources/
        >
            Resources
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/blog/
        >
            Blog
        </a>
    </li>
    
    <li
        class="nav-link-list-item "
        >
        <a
            class="nav-link-list-link "
            href=https://cigmah.org/contact/
        >
            Contact
        </a>
    </li>
    

    <li
        class="nav-link-list-item"
        id="nav-right-item"
        >
        <a
            href="https://aorta.cigmah.org"
            id="nav-aorta-link"
            class="nav-link-list-link"
        >
            <img id="nav-aorta-link-icon" src="/img/aorta-icon.png">
            <div id="nav-aorta-link">AORTA</div>
        </a>
    </li>
</ul>
</nav>

        </header>

        <main>



<section class="normal-page">
    <article id="side-navigation">
        <article id="toggle-side-navigation-container">

            
            <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle11/puzzle11/" id="back"> &lt;&lt; </a>
            

            <button id="toggle-side-navigation" onClick="toggleSideNav()">Show Articles</button>

            
            <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle13/puzzle13/" id="next"> &gt;&gt; </a>
            

        </article>

        <ul id="side-navigation-list">

            
            <li class="side-navigation-parent">
                <a href="https://cigmah.org/events/">Events</a>
            </li>
            


            <li class="side-navigation-section">
                <a href="https://cigmah.org/events/2019_puzzlehunt/">
                    2019 Puzzle Hunt
                </a>
            </li>

            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle01/">Lost in a Library</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle02/">Metabolic Mayhem</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle03/">Combo Catcher</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle04/">Troubled Test</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle05/">Out of Sync</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle06/">While You&#39;re Waiting</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle07/">Infectious Network</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle08/puzzle08/">Tarsal Tumble</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle09/puzzle09/">Fundal Flow</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle10/">Bite Cell Scouting</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle11/puzzle11/">NeuroLogic</a>
            </li>
            
            <li
                class="side-navigation-item  active "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle12/">Reschedule All</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle13/puzzle13/">Allele Inference</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle14/puzzle14/">Base in Balance</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle15/puzzle15/">Worst Offender</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle16/puzzle16/">STI Bugs&#39;n&#39;Drugs</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle17/puzzle17/">What Dipstick?</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle18/puzzle18/">Peak Flow Diary</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle19/puzzle19/">HPV Profiling</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle20/puzzle20/">Code Broadcast</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle21/puzzle21/">Genetic Thrift</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle22/puzzle22/">Neural Decoding</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle23/puzzle23/">Run! (Preclinical)</a>
            </li>
            
            <li
                class="side-navigation-item "
            >
                <a href="https://cigmah.org/events/2019_puzzlehunt/puzzles/cgmnt-puzzle24/puzzle24/">Run! (Clinical)</a>
            </li>
            

        </ul>

    </article>

    <section id="container">

        <article id="content">
            <header id="content-header">
            <h1 id="content-title"> Reschedule All </h1>

            
                <div id="subtitle">
                    <div> 2019 Puzzle Hunt - Puzzle 12B </div>
                </div>
            

            </div>

            </header>

            <section id="content-body">
                <blockquote>
<p>This puzzle was released on 2019-05-11, and was the Beginner puzzle for the theme <em>A Little Logic</em>.</p>
</blockquote>
<p>It&rsquo;s 3:20am. Facing North, you walk through the corridor on the 4th wall.</p>
<p><img src="https://i.imgur.com/SbjycVm.gif" alt="Image"></p>
<ol>
<li>Dr Y. L. Noehtmi is the only doctor at The Clinic on the Outskirts.</li>
<li>He was supposed to be back from holiday tomorrow, but his flight&rsquo;s been delayed.</li>
<li>He&rsquo;s determined not to let his patients down and will work 8am to 5pm the
following day to catch up.</li>
<li>You task is to <strong>reschedule his patients for a new appointment from 8am to 5pm the day he arrives.</strong></li>
<li>There are 26 patients.</li>
<li>Each patient gets an <em>exactly</em> <strong>20-minute slot</strong>, and Dr Noehtmi is <em>always</em> on time.</li>
<li>Slots start from 8am and run on the dot every 20 minutes (i.e. 8:00, 8:20, 8:40 etc.).</li>
<li>You&rsquo;ve received from each patient a range of times during which they are
available to come in for their rescheduled appointment.</li>
<li>You need to schedule each patient such that the <strong>full 20 minutes of the
appointment</strong> fall within the range of times they are available.</li>
<li>As there are 9 hours between 8am and 5pm, there are 27 20-minute slots.</li>
<li>That means Dr Noehtmi gets one 20-minute break during the day.</li>
<li><strong>Reschedule all the patients according to their availabilities</strong>, then
<strong>determine what time during the day Dr Noehtmi <em>starts</em> his only break.</strong></li>
<li>There is only one solution.</li>
</ol>
<p>Non-alphanumeric characters are stripped. Punctuation and spacing doesn&rsquo;t matter.</p>
<h2 id="input">Input</h2>
<p><a href="https://drive.google.com/file/d/1Xd4s7tHgW195xHNAr1uQNVGjZ_g-aO31/view?usp=sharing">cgmnt_input12.txt (1KB)</a></p>
<h2 id="statement">Statement</h2>
<p>When the patients are scheduled successfully, state the time (in 4-digit 24 hour time) when Dr Noehtmi&rsquo;s only scheduled break starts.</p>
<h2 id="references">References</h2>
<p>Written by the CIGMAH Puzzle Hunt Team.</p>
<h2 id="answer">Answer</h2>
<p>The correct solution was <code>1220</code>.</p>
<h2 id="explanation">Explanation</h2>
<h3 id="map-hint">Map Hint</h3>
<p>Your ability to logically reschedule patients is impressive. You wonder if you
could schedule more things. Sleep, perhaps.</p>
<p>You open the file <code>map_hint.txt</code>.</p>
<pre><code>The key is:

enalgunanaqueldealgunhexagonorazonaronloshombresdebeexistirunlibroquesealacifrayelcompendioperfectodetodoslosdemasalgunbibliotecarioloharecorridoyesanalogoaundios

When deciphering, preserve the capitalisation of the original map text and skip
non alphabetic characters, leaving them as they are.

</code></pre><p>Well this is finally useful. You experience a feeling of deja vu.</p>
<h3 id="writers-notes">Writer&rsquo;s Notes</h3>
<p>We sincerely apologise, but our writer&rsquo;s notes for this month are very sparse.
We have provided our solutions, but that&rsquo;s it for now. A proper writeup
including the data generation will come in due course.</p>
<p>Scheduling is a problem particularly amenable to logic programming. A more
interesting discussion than this one line to come soon&hellip;or eventually.</p>
<p>(We note that programming is not explicitly required to answer the actual question of this puzzle. But it is useful to use programming to find the arrangement&hellip;)</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">re</span>
<span style="color:#008000;font-weight:bold">from</span> <span style="color:#00f;font-weight:bold">constraint</span> <span style="color:#008000;font-weight:bold">import</span> <span style="color:#666">*</span>
<span style="color:#008000;font-weight:bold">from</span> <span style="color:#00f;font-weight:bold">pathlib</span> <span style="color:#008000;font-weight:bold">import</span> Path
<span style="color:#008000;font-weight:bold">from</span> <span style="color:#00f;font-weight:bold">datetime</span> <span style="color:#008000;font-weight:bold">import</span> datetime, timedelta

<span style="color:#408080;font-style:italic">### Default by datetime.strptime when parsing hours and minutes alone.</span>
d0 <span style="color:#666">=</span> datetime(<span style="color:#666">1900</span>, <span style="color:#666">1</span>, <span style="color:#666">1</span>, <span style="color:#666">8</span>, <span style="color:#666">0</span>)

<span style="color:#408080;font-style:italic">### Preprocessing. Wish Python had more functional idioms.</span>
redata   <span style="color:#666">=</span> re<span style="color:#666">.</span>compile(<span style="color:#ba2121">r</span><span style="color:#ba2121">&#39;(\w+) is available between (.*)\.&#39;</span>)
data     <span style="color:#666">=</span> redata<span style="color:#666">.</span>findall(Path(<span style="color:#ba2121">&#34;./cgmnt_input12.txt&#34;</span>)<span style="color:#666">.</span>read_text())
names    <span style="color:#666">=</span> [t[<span style="color:#666">0</span>] <span style="color:#008000;font-weight:bold">for</span> t <span style="color:#a2f;font-weight:bold">in</span> data]
timestrs <span style="color:#666">=</span> [<span style="color:#008000">tuple</span>(<span style="color:#008000">map</span>(<span style="color:#008000;font-weight:bold">lambda</span> s: s<span style="color:#666">.</span>split(<span style="color:#ba2121">&#34; to &#34;</span>), t[<span style="color:#666">1</span>]<span style="color:#666">.</span>split(<span style="color:#ba2121">&#34;and&#34;</span>))) <span style="color:#008000;font-weight:bold">for</span> t <span style="color:#a2f;font-weight:bold">in</span> data]
times    <span style="color:#666">=</span> <span style="color:#008000">list</span>(<span style="color:#008000">map</span>(<span style="color:#008000;font-weight:bold">lambda</span> rs:<span style="color:#008000">tuple</span>(<span style="color:#008000">map</span>(<span style="color:#008000;font-weight:bold">lambda</span> r:<span style="color:#008000">tuple</span>(<span style="color:#008000">map</span>(<span style="color:#008000;font-weight:bold">lambda</span> s:\
           <span style="color:#008000">int</span>((datetime<span style="color:#666">.</span>strptime(s<span style="color:#666">.</span>strip(),<span style="color:#ba2121">&#34;%H:%M&#34;</span>)<span style="color:#666">-</span>d0)<span style="color:#666">.</span>total_seconds()<span style="color:#666">/</span><span style="color:#666">60</span>),r)),rs)),timestrs))

<span style="color:#408080;font-style:italic">### Allowable appointment slots in minutes since start of workday.</span>
slots <span style="color:#666">=</span> <span style="color:#008000">range</span>(<span style="color:#666">0</span>, <span style="color:#666">60</span> <span style="color:#666">*</span> <span style="color:#666">9</span>, <span style="color:#666">20</span>)

problem <span style="color:#666">=</span> Problem()

<span style="color:#408080;font-style:italic">### Add variables and with the appropriate domain for each person&#39;s availabilities.</span>
<span style="color:#008000;font-weight:bold">for</span> name, time <span style="color:#a2f;font-weight:bold">in</span> <span style="color:#008000">zip</span>(names, times):
    domain <span style="color:#666">=</span> [s <span style="color:#008000;font-weight:bold">for</span> s <span style="color:#a2f;font-weight:bold">in</span> slots <span style="color:#008000;font-weight:bold">if</span> <span style="color:#008000">any</span>(<span style="color:#008000">map</span>(<span style="color:#008000;font-weight:bold">lambda</span> t: t[<span style="color:#666">0</span>] <span style="color:#666">&lt;=</span> s <span style="color:#666">&lt;=</span> s <span style="color:#666">+</span> <span style="color:#666">20</span> <span style="color:#666">&lt;=</span> t[<span style="color:#666">1</span>], time))]
    problem<span style="color:#666">.</span>addVariable(name, domain)

<span style="color:#408080;font-style:italic">### No clashing appointments</span>
problem<span style="color:#666">.</span>addConstraint(AllDifferentConstraint())

solution      <span style="color:#666">=</span> <span style="color:#008000">sorted</span>([(time, name) <span style="color:#008000;font-weight:bold">for</span> name, time <span style="color:#a2f;font-weight:bold">in</span> problem<span style="color:#666">.</span>getSolution()<span style="color:#666">.</span>items()])
breakstart    <span style="color:#666">=</span> <span style="color:#008000">next</span>(<span style="color:#008000">iter</span>(<span style="color:#008000">set</span>(slots) <span style="color:#666">-</span> <span style="color:#008000">set</span>([time <span style="color:#008000;font-weight:bold">for</span> time, _ <span style="color:#a2f;font-weight:bold">in</span> solution])))
<span style="color:#008000;font-weight:bold">print</span>(datetime<span style="color:#666">.</span>strftime(d0 <span style="color:#666">+</span> timedelta(minutes<span style="color:#666">=</span>breakstart), <span style="color:#ba2121">&#34;%H:%M&#34;</span>))
</code></pre></div>
            </section>

        </article>
    </section>

</section>


        </main>

        <footer><footer>
</footer>
</footer>

    </body>
</html>
